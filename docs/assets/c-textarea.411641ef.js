import{d as e,V as l,I as a,ag as u,ai as o,aq as t,aj as s,ak as r,al as n,am as c,an as i,j as d,m as v,k as p,p as h,l as f,D as m,J as x,av as g,K as b,b as y,e as _,o as C,c as B,w as S,g as k,x as j,q as $,y as w,s as z,v as P,z as F,u as E,M as H,aQ as K,aR as T,f as V}from"./index.77e0feac.js";import{_ as D}from"./c-text.6f7dd3a8.js";import{_ as I}from"./_plugin-vue_export-helper.cdc0426e.js";const R=I(e({__name:"c-textarea",props:{props:null,cClass:null,cStyle:null,textareaClass:null,textareaStyle:null,c:{default:"default"},size:null,height:null,readonly:null,showCount:null,countProps:null,border:null,borderBottom:null,radius:null,path:null,noFeedback:null,value:null,placeholder:null,placeholderStyle:null,placeholderClass:null,disabled:null,maxlength:null,focus:null,autoFocus:null,autoHeight:null,fixed:null,cursorSpacing:null,cursor:null,confirmType:null,confirmHold:null,showConfirmBar:null,selectionStart:null,selectionEnd:null,adjustPosition:null,disableDefaultPadding:null,holdKeyboard:{type:Boolean},autoBlur:{type:Boolean},ignoreCompositionEvent:{type:Boolean}},emits:["update:value","input","focus","blur","confirm","keyboardheightchange","linechange"],setup(e,{expose:I,emit:R}){const q=e,M=l(u,a()),W=l(o,a()),J=l(t,void 0),N=l(s,a()),Q=l(r,a("")),U=l(n,a()),A=l(c,a()),G=l(i,a()),L=F(),O=E(),X=H(),Y=K(),Z=d((()=>q.props?v(q.props,p(q)):q)),ee=d((()=>v(Y.value[Z.value.c],Z.value))),le=a(ee.value.value),ae=a(h(ee.value.focus)),ue=a(null),oe=d((()=>ee.value.path||A.value)),te=d((()=>oe.value&&M.value?M.value[oe.value]:void 0)),se=d((()=>oe.value&&N.value?N.value[oe.value]:void 0)),re=d((()=>f(L.value,ee.value.size))),ne=d((()=>re.value||Q.value||m(L.value.m))),ce=d((()=>h(ee.value.autoHeight))),ie=d((()=>h(ee.value.disabled))),de=d((()=>ie.value||W.value||U.value||!1)),ve=d((()=>h(ee.value.readonly)||de.value)),pe=d((()=>h(ee.value.border))),he=d((()=>h(ee.value.borderBottom))),fe=d((()=>h(ee.value.showCount))),me=d((()=>ee.value.maxlength||140)),xe=d((()=>void 0!==ee.value.radius?ee.value.radius:"s")),ge=d((()=>x(X.value,xe.value))),be=d((()=>h(ee.value.noFeedback)||G.value||!1)),ye=d((()=>ne.value.replace(/\d+/,(e=>Math.floor(.9*Number(e))+"")))),_e=d((()=>v({x:["c-textarea__textarea"]},{x:ee.value.textareaClass}).x)),Ce=d((()=>{const e={color:O.value.main,fontSize:ne.value};return!ce.value&&ee.value.height&&(e.height=ee.value.height),pe.value?(e.borderWidth="1px",e.borderRadius=ge.value,e.padding=`calc(${ne.value} * 0.65)`):he.value&&(e.paddingBottom=`calc(${ne.value} * 0.4)`,e.borderBottomWidth="1px"),e})),Be=d((()=>{const e={};return!be.value&&se.value?e.borderColor=O.value.error:ae.value&&(e.borderColor=O.value.primary),e})),Se=d((()=>v({x:[Ce.value,Be.value]},{x:ee.value.textareaStyle}).x)),ke=d((()=>{let e=ee.value.placeholderStyle||"";return e&&!/;$/.test(e)&&(e+=";"),`${e}font-size: ${ne.value};color: ${O.value.placeholder};`})),je=d((()=>v({x:[]},{x:ee.value.cStyle}).x)),$e=d((()=>v({x:["c-textarea",{"c-textarea__disabled":!W.value&&!U.value&&ie.value}]},{x:ee.value.cClass}).x)),we=d((()=>g(te.value,"input"))),ze=d((()=>g(te.value,"change"))),Pe=d((()=>g(te.value,"focus"))),Fe=d((()=>g(te.value,"blur"))),Ee=(e,l)=>{clearTimeout(Ee.timer),Ee.timer=setTimeout((()=>J&&oe.value&&J(oe.value,void 0,e)),l)};Ee.timer=0;const He=e=>{we.value&&Ee("input",300),R("update:value",le.value),R("input",e)},Ke=e=>{Pe.value&&Ee("focus"),ae.value=!0,R("focus",e)},Te=e=>{Fe.value&&Ee("blur"),ae.value=!1,R("blur",e)},Ve=e=>R("confirm",e),De=e=>R("keyboardheightchange",e);return b((()=>ee.value.value),(e=>{le.value=e})),b((()=>le.value),(()=>ze.value&&Ee("change"))),I({focus:()=>{ae.value=!0}}),(e,l)=>{const a=T,u=y(_("c-text"),D),o=V;return C(),B(o,{class:j($($e)),style:w($(je))},{default:S((()=>[k(a,{ref_key:"textareaRef",ref:ue,modelValue:le.value,"onUpdate:modelValue":l[0]||(l[0]=e=>le.value=e),class:j($(_e)),style:w($(Se)),"auto-height":$(ce),focus:ae.value,"placeholder-style":$(ke),disabled:$(ve),maxlength:$(me),placeholder:$(ee).placeholder||"请输入","placeholder-class":$(ee).placeholderClass,"auto-focus":$(h)($(ee).autoFocus),fixed:$(h)($(ee).fixed),"cursor-spacing":$(ee).cursorSpacing,cursor:$(ee).cursor,"confirm-type":$(ee).confirmType,"confirm-hold":$(h)($(ee).confirmHold),"show-confirm-bar":!1!==$(ee).showConfirmBar,"selection-start":$(ee).selectionStart,"selection-end":$(ee).selectionEnd,"adjust-position":!1!==$(ee).adjustPosition,"disable-default-padding":$(h)($(ee).disableDefaultPadding),"hold-keyboard":$(h)($(ee).holdKeyboard),"auto-blur":$(h)($(ee).autoBlur),"ignore-composition-event":!1!==$(ee).ignoreCompositionEvent,onInput:He,onFocus:Ke,onBlur:Te,onConfirm:Ve,onKeyboardheightchange:De},null,8,["modelValue","class","style","auto-height","focus","placeholder-style","disabled","maxlength","placeholder","placeholder-class","auto-focus","fixed","cursor-spacing","cursor","confirm-type","confirm-hold","show-confirm-bar","selection-start","selection-end","adjust-position","disable-default-padding","hold-keyboard","auto-blur","ignore-composition-event"]),$(fe)&&$(me)?(C(),B(o,{key:0,class:"c-textarea__count-wrap"},{default:S((()=>[z(e.$slots,"count",{value:le.value},(()=>{var e;return[k(u,{props:{size:$(ye),color:"secondary",...$(ee).countProps},text:`${(null==(e=le.value)?void 0:e.length)||0} / ${$(me)}`},null,8,["props","text"])]}),!0)])),_:3})):P("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-9d13c0de"]]);export{R as _};
