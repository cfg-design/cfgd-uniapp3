import{_ as e}from"./c-button.7345495c.js";import{d as l,I as t,j as a,m as s,k as u,p as n,J as o,bc as c,K as i,b as p,e as r,o as v,c as d,w as x,q as m,x as f,y as b,v as _,g as y,s as h,bd as k,M as g,f as C,be as $,a as w,r as I,F as j,h as S,t as z}from"./index.77e0feac.js";import{_ as R}from"./c-col.53aa3641.js";import{_ as B}from"./c-row.c58eb727.js";import{_ as P}from"./c-icon.vue_vue_type_script_setup_true_lang.c3452c23.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as W}from"./c-text.6f7dd3a8.js";import"./c-spin.91baef47.js";import"./getRect.3e8ad009.js";import"./_isString.25f07ec4.js";let M=2e3;const A=U(l({__name:"c-popup",props:{props:null,cClass:null,cStyle:null,maskClass:null,maskStyle:null,contentClass:null,contentStyle:null,closeWrapClass:null,closeWrapStyle:null,c:{default:"default"},visible:null,placement:null,zIndex:null,radius:null,closable:null,closeIconProps:null,noMask:null,maskClosable:null,safeAreaInsetBottom:null,statusBar:null},emits:["update:visible","show","close"],setup(e,{expose:l,emit:$}){const w=e,I=k(),j=g(),S=t(!1),z=t({}),R=t({}),B=t({}),U=t({}),W=t(""),A=a((()=>w.props?s(w.props,u(w)):w)),X=a((()=>s(I.value[A.value.c],A.value))),Y=a((()=>void 0!==X.value.placement?X.value.placement:"left")),q=a((()=>n(X.value.visible))),F=a((()=>n(X.value.closable))),H=a((()=>n(X.value.noMask))),J=a((()=>n(X.value.maskClosable))),K=a((()=>n(X.value.safeAreaInsetBottom))),T=a((()=>n(X.value.statusBar))),D=a((()=>void 0!==X.value.radius?X.value.radius:"m")),E=a((()=>{const e=o(j.value,D.value).split(" ");return e[1]=e[1]||e[0],e[2]=e[2]||e[0],e[3]=e[3]||e[1],e.join(" ")})),G=a((()=>{const e={};switch(Y.value){case"right":e.alignItems="flex-end";break;case"bottom":e.justifyContent="flex-end";break;case"center":e.alignItems="center",e.justifyContent="center"}return s({x:[e]},{x:X.value.cStyle}).x})),L=a((()=>s({x:G.value},{x:[z.value]}).x)),N=a((()=>s({x:["c-popup",{"c-popup__visible":S.value}]},{x:X.value.cClass}).x)),O=a((()=>s({x:X.value.maskStyle},{x:[R.value]}).x)),Q=a((()=>s({x:["c-popup__mask"]},{x:X.value.maskClass}).x)),V=a((()=>{const e={};switch(Y.value){case"top":e.width="100%",e.transform="translateY(-100%)",e.borderRadius=E.value.replace(/^(.+) (.+) (.+) (.+)/,"0 0 $3 $4");break;case"bottom":e.width="100%",e.transform="translateY(100%)",e.borderRadius=E.value.replace(/^(.+) (.+) (.+) (.+)/,"$1 $2 0 0");break;case"right":e.height="100%",e.transform="translateX(100%)",e.borderRadius=E.value.replace(/^(.+) (.+) (.+) (.+)/,"$1 0 0 $4");break;case"left":e.height="100%",e.transform="translateX(-100%)",e.borderRadius=E.value.replace(/^(.+) (.+) (.+) (.+)/,"0 $2 $3 0");break;case"center":e.transform="scale(1.2)",e.borderRadius=E.value}return s({x:[e]},{x:X.value.contentStyle}).x})),Z=a((()=>s({x:V.value},{x:[B.value]}).x)),ee=a((()=>s({x:["c-popup__content"]},{x:X.value.contentClass}).x)),le=a((()=>s({x:X.value.closeWrapStyle},{x:[U.value]}).x)),te=a((()=>s({x:["c-popup__close-wrap"]},{x:X.value.closeWrapClass}).x));T.value&&c({success(e){W.value=e.statusBarHeight+"px"}});const ae=()=>{if(S.value)return;let{zIndex:e}=X.value;e=void 0!==e?e:M++,S.value=!0,z.value.zIndex=e,U.value.zIndex=e,R.value={zIndex:e,opacity:1},B.value={zIndex:e,opacity:1,transform:"center"===Y.value?"scale(1)":"translate(0, 0)"},$("show")},se=()=>{S.value&&(R.value={},B.value={},B.value={},setTimeout((()=>{S.value=!1,$("close")}),350))};return q.value&&ae(),i((()=>q.value),(e=>e!==S.value&&(e?ae():se()))),i((()=>S.value),(e=>$("update:visible",e))),l({show:ae,hide:se}),(e,l)=>{const t=C,a=p(r("c-icon"),P);return v(),d(t,{class:f(m(N)),style:b(m(L))},{default:x((()=>[m(H)?_("v-if",!0):(v(),d(t,{key:0,class:f(m(Q)),style:b(m(O)),onClick:l[0]||(l[0]=e=>m(J)&&se())},null,8,["class","style"])),m(T)?(v(),d(t,{key:1,style:b({height:W.value})},null,8,["style"])):_("v-if",!0),y(t,{class:f(m(ee)),style:b(m(Z))},{default:x((()=>[h(e.$slots,"default",{},void 0,!0),m(F)?(v(),d(t,{key:0,class:f(m(te)),style:b(m(le)),onClick:se},{default:x((()=>[y(a,{props:{name:"close-line",size:"3xl",color:"secondary",...m(X).closeIconProps}},null,8,["props"])])),_:1},8,["class","style"])):_("v-if",!0),m(K)?(v(),d(t,{key:1,style:{height:"env(safe-area-inset-bottom)"}})):_("v-if",!0)])),_:3},8,["class","style"])])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-440e63ad"]]),X=U(l({__name:"c-popup-title",props:{props:null,cClass:null,cStyle:null,c:{default:"default"},title:null,titleProps:null},setup(e){const l=e,t=$(),n=a((()=>l.props?s(l.props,u(l)):l)),o=a((()=>s(t.value[n.value.c],n.value))),c=a((()=>s({x:[]},{x:o.value.cStyle}).x)),i=a((()=>s({x:["c-popup-title"]},{x:o.value.cClass}).x)),k={justify:"space-between",align:"center",cStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}};return(e,l)=>{const t=p(r("c-text"),W),a=p(r("c-col"),R),s=p(r("c-row"),B),u=C;return v(),d(u,{class:f(m(i)),style:b(m(c))},{default:x((()=>[h(e.$slots,"default",{},(()=>[y(t,{props:{strong:!0,lines:1,size:"l",...m(o).titleProps},text:m(o).title},null,8,["props","text"])]),!0),e.$slots.left||e.$slots.$left||e.$slots.right||e.$slots.$right?(v(),d(s,{key:0,props:k},{default:x((()=>[y(a,null,{default:x((()=>[h(e.$slots,"left",{},void 0,!0)])),_:3}),y(a,null,{default:x((()=>[h(e.$slots,"right",{},void 0,!0)])),_:3})])),_:3})):_("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-ec535b00"]]),Y=U(l({__name:"index",setup(l){const a=t(!1),s=t(!1),u=t([{visible:!1,text:"左",placement:"left"},{visible:!1,text:"右",placement:"right"},{visible:!1,text:"上",placement:"top"},{visible:!1,text:"下",placement:"bottom"},{visible:!1,text:"中",placement:"center"}]);return(l,t)=>{const n=p(r("c-button"),e),o=p(r("c-col"),R),c=p(r("c-row"),B),i=p(r("c-popup"),A),m=p(r("c-icon"),P),f=C,b=p(r("c-popup-title"),X);return v(),d(f,{class:"page"},{default:x((()=>[y(c,{gutter:"20",cols:u.value.length},{default:x((()=>[y(o,{span:u.value.length},{default:x((()=>[y(n,{text:"打开弹窗",onClick:t[0]||(t[0]=e=>a.value=!0)})])),_:1},8,["span"]),y(o,{span:u.value.length},{default:x((()=>[y(n,{text:"打开无遮罩弹窗",onClick:t[1]||(t[1]=e=>s.value=!0)})])),_:1},8,["span"]),(v(!0),w(j,null,I(u.value,(e=>(v(),d(o,{key:e.placement,span:"1"},{default:x((()=>[y(n,{text:e.text,onClick:l=>(e=>{e.visible=!0})(e)},null,8,["text","onClick"])])),_:2},1024)))),128))])),_:1},8,["cols"]),y(i,{visible:a.value,"onUpdate:visible":t[4]||(t[4]=e=>a.value=e),"content-style":"padding: 30rpx"},{default:x((()=>[y(n,{text:"关闭弹窗",onClick:t[2]||(t[2]=e=>a.value=!1)}),y(n,{text:"打开弹窗2","c-style":"margin-top: 30rpx",onClick:t[3]||(t[3]=e=>u.value[u.value.length-1].visible=!0)})])),_:1},8,["visible"]),y(i,{visible:s.value,"onUpdate:visible":t[6]||(t[6]=e=>s.value=e),placement:"center","content-style":"width: 600rpx",closable:"","no-mask":""},{default:x((()=>[y(b,{title:"弹窗"},{left:x((()=>[y(f,{style:{padding:"30rpx"},onClick:t[5]||(t[5]=e=>a.value=!0)},{default:x((()=>[y(m,{name:"add-line",size:"3xl"})])),_:1})])),_:1})])),_:1},8,["visible"]),(v(!0),w(j,null,I(u.value,(e=>(v(),d(f,{key:e.placement},{default:x((()=>[y(i,{visible:e.visible,"onUpdate:visible":l=>e.visible=l,placement:e.placement,"content-style":"min-width: 300rpx",closable:"","mask-closable":"","safe-area-inset-bottom":"top"!==e.placement&&"center"!==e.placement},{default:x((()=>[y(b,{title:"弹窗"}),y(f,{style:{padding:"0 30rpx 30rpx"}},{default:x((()=>[S(z(e.placement),1)])),_:2},1024)])),_:2},1032,["visible","onUpdate:visible","placement","safe-area-inset-bottom"])])),_:2},1024)))),128))])),_:1})}}}),[["__scopeId","data-v-99e43cbc"]]);export{Y as default};
