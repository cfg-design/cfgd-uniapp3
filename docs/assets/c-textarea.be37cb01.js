import{d as e,U as l,I as a,ag as u,ai as o,as as s,aj as t,ak as r,al as n,am as c,an as i,j as d,m as v,k as p,l as h,z as m,D as f,J as x,av as g,K as b,e as y,f as _,o as C,c as B,w as k,a as S,v as j,q as $,x as w,p as P,s as z,A as T,u as F,M as E,aO as H,aP as K,g as D}from"./index.64ce4e13.js";import{_ as I}from"./c-text.4ba5c9e9.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";var M=V(e({__name:"c-textarea",props:{props:null,cClass:null,cStyle:null,c:{default:"default"},size:null,height:null,readonly:null,showCount:null,countTextProps:null,border:null,borderBottom:null,radius:null,path:null,noFeedback:null,value:null,placeholder:null,placeholderStyle:null,placeholderClass:null,disabled:null,maxlength:null,focus:null,autoFocus:null,autoHeight:null,fixed:null,cursorSpacing:null,cursor:null,confirmType:null,confirmHold:null,showConfirmBar:null,selectionStart:null,selectionEnd:null,adjustPosition:null,disableDefaultPadding:null,holdKeyboard:{type:Boolean},autoBlur:{type:Boolean},ignoreCompositionEvent:{type:Boolean}},emits:["update:value","input","focus","blur","confirm","keyboardheightchange","linechange"],setup(e,{expose:V,emit:M}){const R=e,U=l(u,a()),W=l(o,a()),q=l(s,void 0),A=l(t,a()),J=l(r,a("")),N=l(n,a()),O=l(c,a()),G=l(i,a()),L=T(),Q=F(),X=E(),Y=H(),Z=d((()=>R.props?v(R.props,p(R)):R)),ee=d((()=>v(Y.value[Z.value.c],Z.value))),le=a(ee.value.value),ae=a(h(ee.value.focus)),ue=a(null),oe=d((()=>ee.value.path||O.value)),se=d((()=>oe.value&&U.value?U.value[oe.value]:void 0)),te=d((()=>oe.value&&A.value?A.value[oe.value]:void 0)),re=d((()=>m(L.value,ee.value.size))),ne=d((()=>re.value||J.value||f(L.value.m))),ce=d((()=>h(ee.value.autoHeight))),ie=d((()=>h(ee.value.disabled))),de=d((()=>ie.value||W.value||N.value||!1)),ve=d((()=>h(ee.value.readonly)||de.value)),pe=d((()=>h(ee.value.border))),he=d((()=>h(ee.value.borderBottom))),me=d((()=>h(ee.value.showCount))),fe=d((()=>ee.value.maxlength||140)),xe=d((()=>void 0!==ee.value.radius?ee.value.radius:"s")),ge=d((()=>x(X.value,xe.value))),be=d((()=>h(ee.value.noFeedback)||G.value||!1)),ye=d((()=>ne.value.replace(/\d+/,(e=>Math.floor(.9*Number(e))+"")))),_e=d((()=>v({x:["c-textarea__textarea"]},{x:ee.value.cClass}).x)),Ce=d((()=>{const e={color:Q.value.main,fontSize:ne.value};return!ce.value&&ee.value.height&&(e.height=ee.value.height),pe.value?(e.borderWidth="1px",e.borderRadius=ge.value,e.padding=`calc(${ne.value} * 0.65)`):he.value&&(e.paddingBottom=`calc(${ne.value} * 0.4)`,e.borderBottomWidth="1px"),e})),Be=d((()=>{const e={};return!be.value&&te.value?e.borderColor=Q.value.error:ae.value&&(e.borderColor=Q.value.primary),e})),ke=d((()=>v({x:ee.value.cStyle},{x:[Ce.value,Be.value]}).x)),Se=d((()=>{let e=ee.value.placeholderStyle||"";return e&&!/;$/.test(e)&&(e+=";"),`${e}font-size: ${ne.value};color: ${Q.value.placeholder};`})),je=d((()=>v({x:[]},{x:ee.value.cStyle}).x)),$e=d((()=>v({x:["c-textarea",{"c-textarea__disabled":!W.value&&!N.value&&ie.value}]},{x:ee.value.cClass}).x)),we=d((()=>g(se.value,"input"))),Pe=d((()=>g(se.value,"change"))),ze=d((()=>g(se.value,"focus"))),Te=d((()=>g(se.value,"blur"))),Fe=(e,l)=>{clearTimeout(Fe.timer),Fe.timer=setTimeout((()=>q&&oe.value&&q(oe.value,void 0,e)),l)};Fe.timer=0;const Ee=e=>{we.value&&Fe("input",300),M("update:value",le.value),M("input",e)},He=e=>{ze.value&&Fe("focus"),ae.value=!0,M("focus",e)},Ke=e=>{Te.value&&Fe("blur"),ae.value=!1,M("blur",e)},De=e=>M("confirm",e),Ie=e=>M("keyboardheightchange",e);return b((()=>ee.value.value),(e=>{le.value=e})),b((()=>le.value),(()=>Pe.value&&Fe("change"))),V({focus:()=>{ae.value=!0}}),(e,l)=>{const a=K,u=y(_("c-text"),I),o=D;return C(),B(o,{class:j($($e)),style:w($(je))},{default:k((()=>[S(a,{ref_key:"textareaRef",ref:ue,modelValue:le.value,"onUpdate:modelValue":l[0]||(l[0]=e=>le.value=e),class:j($(_e)),style:w($(ke)),"auto-height":$(ce),focus:ae.value,"placeholder-style":$(Se),disabled:$(ve),maxlength:$(fe),placeholder:$(ee).placeholder||"请输入","placeholder-class":$(ee).placeholderClass,"auto-focus":$(h)($(ee).autoFocus),fixed:$(h)($(ee).fixed),"cursor-spacing":$(ee).cursorSpacing,cursor:$(ee).cursor,"confirm-type":$(ee).confirmType,"confirm-hold":$(h)($(ee).confirmHold),"show-confirm-bar":!1!==$(ee).showConfirmBar,"selection-start":$(ee).selectionStart,"selection-end":$(ee).selectionEnd,"adjust-position":!1!==$(ee).adjustPosition,"disable-default-padding":$(h)($(ee).disableDefaultPadding),"hold-keyboard":$(h)($(ee).holdKeyboard),"auto-blur":$(h)($(ee).autoBlur),"ignore-composition-event":!1!==$(ee).ignoreCompositionEvent,onInput:Ee,onFocus:He,onBlur:Ke,onConfirm:De,onKeyboardheightchange:Ie},null,8,["modelValue","class","style","auto-height","focus","placeholder-style","disabled","maxlength","placeholder","placeholder-class","auto-focus","fixed","cursor-spacing","cursor","confirm-type","confirm-hold","show-confirm-bar","selection-start","selection-end","adjust-position","disable-default-padding","hold-keyboard","auto-blur","ignore-composition-event"]),$(me)&&$(fe)?(C(),B(o,{key:0,class:"c-textarea__count-wrap"},{default:k((()=>[P(e.$slots,"count",{value:le.value},(()=>{var e;return[S(u,{props:{size:$(ye),color:"secondary",...$(ee).countTextProps},text:`${(null==(e=le.value)?void 0:e.length)||0} / ${$(fe)}`},null,8,["props","text"])]}),!0)])),_:3})):z("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-341de1d9"]]);export{M as _};
