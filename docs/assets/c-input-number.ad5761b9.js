import{_ as l}from"./c-button.7345495c.js";import{d as e,V as a,I as u,ai as s,ak as n,al as t,j as r,m as o,k as v,l as p,D as i,p as d,J as c,K as m,b,e as f,o as x,c as _,w as y,g,q as P,x as h,y as C,z as j,u as k,M as z,aP as B,at as N,f as R}from"./index.77e0feac.js";import{_ as S}from"./c-input.6a87db1d.js";import{_ as $}from"./_plugin-vue_export-helper.cdc0426e.js";const w=$(e({__name:"c-input-number",props:{props:null,cClass:null,cStyle:null,c:{default:"default"},value:null,min:null,max:null,step:null,color:null,size:null,inputProps:null,plusButtonProps:null,minusButtonProps:null,disabled:null,radius:null,round:null},emits:["update:value","plus","minus"],setup(e,{expose:$,emit:w}){const I=e,M=a(s,u(!1)),q=a(n,u("")),A=a(t,u(!1)),D=j(),J=k(),K=z(),U=B(),V=r((()=>I.props?o(I.props,v(I)):I)),E=r((()=>o(U.value[V.value.c],V.value))),F=u(),G=r((()=>E.value.value||0)),H=u(G.value+""),L=r((()=>E.value.step||1)),O=r((()=>E.value.color||"#f2f2f2")),Q=r((()=>{const{color:l}=E.value;return l&&J.value[l]?"#fff":J.value.main})),T=r((()=>p(D.value,E.value.size))),W=r((()=>T.value||q.value||i(D.value.m))),X=r((()=>d(E.value.disabled))),Y=r((()=>X.value||M.value||A.value||!1)),Z=r((()=>void 0!==E.value.radius?E.value.radius:"s")),ll=r((()=>c(K.value,Z.value))),el=r((()=>d(E.value.round))),al=r((()=>el.value?"9999px":ll.value)),ul=r((()=>{const{min:l}=E.value;return void 0!==l&&G.value<=l})),sl=r((()=>{const{max:l}=E.value;return void 0!==l&&G.value>=l})),nl=r((()=>({radius:0,size:W.value,color:O.value,textColor:Q.value}))),tl=r((()=>[{borderRadius:al.value}])),rl=r((()=>o({x:[tl.value]},{x:E.value.cStyle}).x)),ol=r((()=>o({x:["c-input-number"]},{x:E.value.cClass}).x)),vl=r((()=>({width:`calc(${W.value} * 4)`,margin:"0 4rpx"}))),pl=r((()=>o({radius:0,inputAlign:"center",size:W.value,bgColor:O.value,disabled:Y.value,cStyle:[vl.value],placeholder:" "},E.value.inputProps))),il=l=>{if(void 0===l)return 0;const{min:e,max:a}=E.value;return void 0!==e&&l<e?e:void 0!==a&&l>a?a:(l=>{let e=l+"";if(!/\./.test(e))return l;let a="";"-"===e[0]&&(e=e.replace("-",""),a="-");const[u,s]=e.split(".");let n=Math.round(Number(s.replace(/(.{5})$/,".$1")))+"00000",t=Number(u);return n.length-s.length==1&&(++t,n=(n+"").replace(/^./,"")),Number(a+t+"."+n)})(l)},dl=(l,e)=>{const a=il(l);I.value!==a&&(w("update:value",a),e)?w(e,a):a!=l?(H.value="",N((()=>{H.value=a+""}))):H.value=a+""},cl=()=>{const l=G.value-L.value;dl(l,"minus")},ml=()=>{const l=G.value+L.value;dl(l,"plus")},bl=l=>l&&dl(Number(l)),fl=({detail:l})=>dl(Number(l.value)||0);return m((()=>G.value),(l=>dl(l))),$({inputRef:F}),(e,a)=>{const u=b(f("c-button"),l),s=R;return x(),_(s,{class:h(P(ol)),style:C(P(rl))},{default:y((()=>[g(u,{props:{icon:"subtract-line",...P(nl),...P(E).minusButtonProps},disabled:P(Y)||P(ul),onClick:cl},null,8,["props","disabled"]),g(S,{ref_key:"inputRef",ref:F,props:P(pl),value:H.value,type:"number","onUpdate:value":bl,onBlur:fl},null,8,["props","value"]),g(u,{props:{icon:"add-line",...P(nl),...P(E).plusButtonProps},disabled:P(Y)||P(sl),onClick:ml},null,8,["props","disabled"])])),_:1},8,["class","style"])}}}),[["__scopeId","data-v-a5de8a25"]]);export{w as _};
