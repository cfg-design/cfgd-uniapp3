import{d as e,U as a,I as l,ag as u,ai as o,as as s,aj as t,ak as r,al as n,am as c,an as i,l as d,j as v,m as p,k as h,z as m,D as f,J as g,av as x,K as b,e as y,f as _,o as C,c as B,w as k,a as S,v as j,q as w,x as $,p as z,h as F,t as P,s as T,A as E,u as H,M as K,aN as D,aO as I,g as V}from"./index.755831c4.js";import{_ as M}from"./c-text.4c147d33.js";import{_ as N}from"./plugin-vue_export-helper.21dcd24c.js";var R=N(e({__name:"c-textarea",props:{props:null,cClass:null,cStyle:null,c:{default:"default"},size:null,height:null,readonly:null,showCount:null,countTextProps:null,border:null,borderBottom:null,radius:null,path:null,noFeedback:null,value:null,placeholder:null,placeholderStyle:null,placeholderClass:null,disabled:null,maxlength:null,focus:null,autoFocus:null,autoHeight:null,fixed:null,cursorSpacing:null,cursor:null,confirmType:null,confirmHold:null,showConfirmBar:null,selectionStart:null,selectionEnd:null,adjustPosition:null,disableDefaultPadding:null,holdKeyboard:{type:Boolean},autoBlur:{type:Boolean},ignoreCompositionEvent:{type:Boolean}},emits:["update:value","input","focus","blur","confirm","keyboardheightchange","linechange"],setup(e,{expose:N,emit:R}){const U=e,W=a(u,l()),q=a(o,l()),A=a(s,void 0),J=a(t,l()),O=a(r,l("")),G=a(n,l()),L=a(c,l()),Q=a(i,l()),X=E(),Y=H(),Z=K(),ee=D(),ae=l(U.value),le=l(d(U.autoFocus)),ue=l(null),oe=v((()=>U.props?p(U.props,h(U)):U)),se=v((()=>p(ee.value[oe.value.c],oe.value))),te=v((()=>se.value.path||L.value)),re=v((()=>te.value&&W.value?W.value[te.value]:void 0)),ne=v((()=>te.value&&J.value?J.value[te.value]:void 0)),ce=v((()=>m(X.value,se.value.size))),ie=v((()=>ce.value||O.value||f(X.value.m))),de=v((()=>d(se.value.autoHeight))),ve=v((()=>d(se.value.disabled))),pe=v((()=>ve.value||q.value||G.value||!1)),he=v((()=>d(se.value.readonly)||pe.value)),me=v((()=>d(se.value.border))),fe=v((()=>d(se.value.borderBottom))),ge=v((()=>d(se.value.showCount))),xe=v((()=>se.value.maxlength||140)),be=v((()=>void 0!==se.value.radius?se.value.radius:"s")),ye=v((()=>g(Z.value,be.value))),_e=v((()=>d(se.value.noFeedback)||Q.value||!1)),Ce=v((()=>ie.value.replace(/\d+/,(e=>Math.floor(.9*Number(e))+"")))),Be=v((()=>p({x:["c-textarea__textarea"]},{x:se.value.cClass}).x)),ke=v((()=>{const e={color:Y.value.main,fontSize:ie.value};return!de.value&&se.value.height&&(e.height=se.value.height),me.value?(e.borderWidth="1px",e.borderRadius=ye.value,e.padding=`calc(${ie.value} * 0.65)`):fe.value&&(e.paddingBottom=`calc(${ie.value} * 0.4)`,e.borderBottomWidth="1px"),e})),Se=v((()=>{const e={};return!_e.value&&ne.value?e.borderColor=Y.value.error:le.value&&(e.borderColor=Y.value.primary),e})),je=v((()=>p({x:se.value.cStyle},{x:[ke.value,Se.value]}).x)),we=v((()=>{let e=se.value.placeholderStyle||"";return e&&!/;$/.test(e)&&(e+=";"),`${e}font-size: ${ie.value};color: ${Y.value.placeholder};`})),$e=v((()=>p({x:[]},{x:se.value.cStyle}).x)),ze=v((()=>p({x:["c-textarea",{"c-textarea__disabled":!q.value&&!G.value&&ve.value}]},{x:se.value.cClass}).x)),Fe=v((()=>x(re.value,"input"))),Pe=v((()=>x(re.value,"change"))),Te=v((()=>x(re.value,"focus"))),Ee=v((()=>x(re.value,"blur"))),He=(e,a)=>{clearTimeout(He.timer),He.timer=setTimeout((()=>A&&te.value&&A(te.value,void 0,e)),a)};He.timer=0;const Ke=e=>{Fe.value&&He("input",300),R("update:value",ae.value),R("input",e)},De=e=>{Te.value&&He("focus"),le.value=!0,R("focus",e)},Ie=e=>{Ee.value&&He("blur"),le.value=!1,R("blur",e)},Ve=e=>R("confirm",e),Me=e=>R("keyboardheightchange",e);return b((()=>U.value),(e=>{ae.value=e})),b((()=>ae.value),(()=>Pe.value&&He("change"))),N({focus:()=>{le.value=!0}}),(e,a)=>{const l=I,u=y(_("c-text"),M),o=V;return C(),B(o,{class:j(w(ze)),style:$(w($e))},{default:k((()=>[S(l,{ref_key:"textareaRef",ref:ue,modelValue:ae.value,"onUpdate:modelValue":a[0]||(a[0]=e=>ae.value=e),class:j(w(Be)),style:$(w(je)),"auto-height":w(de),focus:le.value,"placeholder-style":w(we),disabled:w(he),maxlength:w(xe),placeholder:w(se).placeholder||"请输入","placeholder-class":w(se).placeholderClass,"auto-focus":w(se).autoFocus,fixed:w(se).fixed,"cursor-spacing":w(se).cursorSpacing,cursor:w(se).cursor,"confirm-type":w(se).confirmType,"confirm-hold":w(se).confirmHold,"show-confirm-bar":w(se).showConfirmBar,"selection-start":w(se).selectionStart,"selection-end":w(se).selectionEnd,"adjust-position":w(se).adjustPosition,"disable-default-padding":w(se).disableDefaultPadding,"hold-keyboard":w(se).holdKeyboard,"auto-blur":w(se).autoBlur,"ignore-composition-event":w(se).ignoreCompositionEvent,onInput:Ke,onFocus:De,onBlur:Ie,onConfirm:Ve,onKeyboardheightchange:Me},null,8,["modelValue","class","style","auto-height","focus","placeholder-style","disabled","maxlength","placeholder","placeholder-class","auto-focus","fixed","cursor-spacing","cursor","confirm-type","confirm-hold","show-confirm-bar","selection-start","selection-end","adjust-position","disable-default-padding","hold-keyboard","auto-blur","ignore-composition-event"]),w(ge)&&w(xe)?(C(),B(o,{key:0,class:"c-textarea__count-wrap"},{default:k((()=>[z(e.$slots,"count",{value:ae.value},(()=>[S(u,{props:{size:w(Ce),color:"secondary",...w(se).countTextProps}},{default:k((()=>{var e;return[F(P((null==(e=ae.value)?void 0:e.length)||0)+" / "+P(w(xe)),1)]})),_:1},8,["props"])]),!0)])),_:3})):T("v-if",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-702a24d8"]]);export{R as _};
